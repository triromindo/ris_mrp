"use strict";!function(t,s,o){t.fn.fireModal=function(s){var s=t.extend({size:"modal-md",center:!1,animation:!0,title:"Modal Title",closeButton:!0,header:!0,bodyClass:"",footerClass:"",body:"",buttons:[],autoFocus:!0,created:function(){},appended:function(){},onFormSubmit:function(){},modal:{}},s);this.each(function(){var i,e="fire-modal-"+ ++o,n="trigger--"+e;t("."+n),t(this).addClass(n);let a=s.body;if("object"==typeof a){if(a.length){let d=a;a=a.removeAttr("id").clone().removeClass("modal-part"),d.remove()}else a='<div class="text-danger">Modal part element not found!</div>'}var l='   <div class="modal'+(!0==s.animation?" fade":"")+'" tabindex="-1" role="dialog" id="'+e+'">       <div class="modal-dialog '+s.size+(s.center?" modal-dialog-centered":"")+'" role="document">         <div class="modal-content">  '+(!0==s.header?'         <div class="modal-header">             <h5 class="modal-title">'+s.title+"</h5>  "+(!0==s.closeButton?'           <button type="button" class="close" data-dismiss="modal" aria-label="Close">               <span aria-hidden="true">&times;</span>             </button>  ':"")+"         </div>  ":"")+'         <div class="modal-body">           </div>  '+(s.buttons.length>0?'         <div class="modal-footer">           </div>  ':"")+"       </div>       </div>    </div>  ",l=t(l);s.buttons.forEach(function(s){let o="id"in s?s.id:"";i=t(i='<button type="'+("submit"in s&&!0==s.submit?"submit":"button")+'" class="'+s.class+'" id="'+o+'">'+s.text+"</button>").off("click").on("click",function(){s.handler.call(this,l)}),t(l).find(".modal-footer").append(i)}),t(l).find(".modal-body").append(a),s.bodyClass&&t(l).find(".modal-body").addClass(s.bodyClass),s.footerClass&&t(l).find(".modal-footer").addClass(s.footerClass),s.created.call(this,l,s);let c=t(l).find(".modal-body form"),r=l.find("button[type=submit]");if(t("body").append(l),s.appended.call(this,t("#"+e),c,s),c.length){s.autoFocus&&t(l).on("shown.bs.modal",function(){"boolean"==typeof s.autoFocus?c.find("input:eq(0)").focus():"string"==typeof s.autoFocus&&c.find(s.autoFocus).length&&c.find(s.autoFocus).focus()});let m={startProgress:function(){l.addClass("modal-progress")},stopProgress:function(){l.removeClass("modal-progress")}};c.find("button").length||t(c).append('<button class="d-none" id="'+e+'-submit"></button>'),r.click(function(){c.submit()}),c.submit(function(t){m.startProgress(),s.onFormSubmit.call(this,l,t,m)})}t(document).on("click","."+n,function(){return t("#"+e).modal(s.modal),!1})})},t.destroyModal=function(t){t.modal("hide"),t.on("hidden.bs.modal",function(){})},t.cardProgress=function(s,o){var o=t.extend({dismiss:!1,dismissText:"Cancel",spinner:!0,onDismiss:function(){}},o),i=t(s);if(i.addClass("card-progress"),!1==o.spinner&&i.addClass("remove-spinner"),!0==o.dismiss){var e='<a class="btn btn-danger card-progress-dismiss">'+o.dismissText+"</a>";e=t(e).off("click").on("click",function(){i.removeClass("card-progress"),i.find(".card-progress-dismiss").remove(),o.onDismiss.call(this,i)}),i.append(e)}return{dismiss:function(s){t.cardProgressDismiss(i,s)}}},t.cardProgressDismiss=function(s,o){var i=t(s);i.removeClass("card-progress"),i.find(".card-progress-dismiss").remove(),o&&o.call(this,i)},t.chatCtrl=function(s,o){var o=t.extend({position:"chat-right",text:"",time:moment(new Date().toISOString()).format("hh:mm"),picture:"",type:"text",timeout:0,onShow:function(){}},o),i=t(s),s='<div class="chat-item '+o.position+'" style="display:none"><img src="'+o.picture+'"><div class="chat-details"><div class="chat-text">'+o.text+'</div><div class="chat-time">'+o.time+"</div></div></div>",e='<div class="chat-item chat-left chat-typing" style="display:none"><img src="'+o.picture+'"><div class="chat-details"><div class="chat-text"></div></div></div>',n=s;"typing"==o.type&&(n=e),o.timeout>0?setTimeout(function(){i.find(".chat-content").append(t(n).fadeIn())},o.timeout):i.find(".chat-content").append(t(n).fadeIn());var a=0;i.find(".chat-content .chat-item").each(function(){a+=t(this).outerHeight()}),setTimeout(function(){i.find(".chat-content").scrollTop(a,-1)},100),o.onShow.call(this,n)}}(jQuery,this,0);
